version: '3'

services:

    reverse-proxy:
        image: nginx:latest
        container_name: docker-proxy
        depends_on:
            - web1
            - web2
            - web3
            - laravel
            - larabd
            - acortar
            - bdacortar
        volumes:
            - ./nginx.conf:/etc/nginx/nginx.conf
        ports:
            - 80:80
    web1:
        image: onlychiefy/nginx-multisite-test:1.2
        restart: always
        ports: 
        - 8120:80
        volumes:
            - ./web1:/usr/share/nginx/html
            - ./nginx.conf:/etc/nginx/nginx.conf
    web2:
        image: onlychiefy/nginx-multisite-test:1.3
        restart: always
        ports: 
        - 8121:80
        volumes:
            - ./web2:/usr/share/nginx/html
            - ./nginx.conf:/etc/nginx/nginx.conf
    web3:
        image: onlychiefy/nginx-multisite-test:1.4
        restart: always
        ports: 
        - 8122:80
    acortar:
        image: onlychiefy/nginx-multisite-test:1.5
        restart: always
        ports: 
        - 8123:80
    laravel:
        image: onlychiefy/nginx-multisite-test:1.6
        restart: always
        ports: 
        - 8124:80
    larabd:
        image: onlychiefy/nginx-multisite-test:1.7
        restart: always
        ports: 
        - 8125:80
    bdacortar:
        image: onlychiefy/nginx-multisite-test:1.8
        restart: always
        ports: 
        - 8126:80







